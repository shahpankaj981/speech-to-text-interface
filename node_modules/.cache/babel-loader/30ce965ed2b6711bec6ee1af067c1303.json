{"remainingRequest":"/home/pankaj/audio/node_modules/thread-loader/dist/cjs.js!/home/pankaj/audio/node_modules/babel-loader/lib/index.js!/home/pankaj/audio/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/pankaj/audio/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pankaj/audio/src/components/TrainVoice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pankaj/audio/src/components/TrainVoice.vue","mtime":1568892707240},{"path":"/home/pankaj/audio/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pankaj/audio/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pankaj/audio/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/pankaj/audio/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pankaj/audio/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'trainVoice',\n  props: ['audioname', 'audiofullpath', 'users', 'meetingid'],\n  data: function data() {\n    return {\n      baseurl: null,\n      crop: false,\n      startTime: null,\n      endTime: null,\n      processing: false,\n      processingText: '',\n      recognizeProcessing: false,\n      audioPath: '',\n      form: {\n        attendee_id: '',\n        audio_name: '',\n        voice_list: []\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.baseurl = this.$parent.$attrs.baseurl;\n  },\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      this.processing = true;\n\n      if (this.form.voice_list.length < 1) {\n        this.$snotify.error('You must crop at least once voice sample.!!', 'Error!!');\n        return '';\n      }\n\n      this.form.audio_name = this.audioname;\n      this.processingText = 'Registering voice samples.....';\n      this.$http.post(this.baseurl + '/attendee-voice', this.form).then(function (result) {\n        console.log(result);\n        _this.processingText = 'Training the voice samples for the user.....';\n\n        _this.$http.post(_this.baseurl + '/train-attendee/' + _this.form.attendee_id).then(function (result) {\n          _this.processing = false;\n\n          _this.reset();\n\n          _this.$snotify.success('Voice samples registered and trained successfully!!', 'Success!!');\n        }).catch(function (error) {\n          _this.processing = false;\n\n          _this.$snotify.error('Something went wrong!!', 'Error');\n        });\n      }).catch(function (error) {\n        _this.processing = false;\n\n        _this.$snotify.error('Something went wrong!!', 'Error');\n      });\n    },\n    recognizeSpeakers: function recognizeSpeakers() {\n      var _this2 = this;\n\n      this.recognizeProcessing = true;\n      this.$http.post(this.baseurl + '/recognize-speaker/' + this.meetingid).then(function (result) {\n        _this2.recognizeProcessing = false;\n\n        _this2.$emit('voiceRecognized', result.data.data.recognized_speakers);\n\n        _this2.$snotify.success('Voices recognized successfully!!', 'Success!!');\n      }).catch(function (error) {\n        _this2.recognizeProcessing = false;\n\n        _this2.$snotify.error('Something went wrong!!', 'Error!!');\n      });\n    },\n    cropTime: function cropTime(event) {\n      var aud = document.getElementById('audio-player');\n      var currentTime = aud.currentTime;\n\n      if (!this.crop) {\n        this.startTime = currentTime;\n      } else {\n        this.endTime = currentTime;\n\n        if (this.endTime - this.startTime < 1) {\n          this.$snotify.error('The time frame should be at least 1 second.!!', 'Error');\n          return;\n        }\n\n        this.form.voice_list.push({\n          start: this.startTime,\n          end: this.endTime\n        });\n        this.startTime = null;\n        this.endTime = null;\n      }\n\n      this.crop = !this.crop;\n    },\n    reset: function reset() {\n      this.form.attendee_id = '';\n      this.form.voice_list = [];\n    },\n    removeVoice: function removeVoice(key, voice) {\n      if (!confirm('Are you sure you want to delete?')) {\n        return;\n      }\n\n      this.$delete(this.form.voice_list, key); //this.checks = this.values.related_checks;\n    }\n  }\n};",{"version":3,"sources":["TrainVoice.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <form id=\"voice-register-form\" style=\"text-align: left;\" @submit.prevent=\"submit\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"form-group\">\n            <label for=\"first_name\">User</label>\n            <select class=\"form-control\" v-model=\"form.attendee_id\" required>\n              <option value=\"\">Select User</option>\n              <option v-for=\"(name,id) in users\" :value=\"id\" v-text=\"name\"></option>\n            </select>\n            <!--            <small id=\"emailHelp\" class=\"form-text text-muted\">We'll never share your email with anyone else.</small>-->\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <audio :src=\"audiofullpath\" id=\"audio-player\" controls style=\"width: 100% !important;\">\n            <!--            <source :src=\"audiofullpath\">-->\n          </audio>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-3\"></div>\n        <div class=\"col-md-6\">\n          <button type=\"button\"\n                  :class=\"crop ? 'btn btn-block btn-danger' :'btn btn-block btn-success'\"\n                  @click=\"cropTime\"\n                  v-text=\"crop ? 'Stop Cropping' : 'Start Cropping'\"></button>\n        </div>\n        <div class=\"col-md-1\"></div>\n        <div class=\"col-md-2\">\n          <button type=\"button\" @click=\"reset\" class=\"btn btn-danger\">Reset</button>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-3\"></div>\n        <div class=\"col-md-6\">\n          <hr>\n          <table class=\"table table-striped\">\n            <tr>\n              <th>Start Time</th>\n              <th>End Time</th>\n              <th>Action</th>\n            </tr>\n            <tr v-for=\"(voice, key) in form.voice_list\">\n              <td v-text=\"voice.start\"></td>\n              <td v-text=\"voice.end\"></td>\n              <td>\n                <a href=\"javascript:void(0)\"\n                   class=\"btn btn-sm btn-outline-danger\"\n                   @click=\"removeVoice(key, voice)\">\n                  Remove\n                </a>\n              </td>\n            </tr>\n          </table>\n        </div>\n      </div>\n      <hr>\n      <!--      <div class=\"form-check\">-->\n      <!--        <input type=\"checkbox\" class=\"form-check-input\" id=\"exampleCheck1\">-->\n      <!--        <label class=\"form-check-label\" for=\"exampleCheck1\">Check me out</label>-->\n      <!--      </div>-->\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <button type=\"submit\" class=\"btn btn-block btn-outline-primary\"\n                  :disabled=\"processing\"\n                  v-text=\"processing ? processingText : 'Submit'\"></button>\n        </div>\n      </div>\n    </form>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <hr>\n        <button type=\"button\" class=\"btn btn-block btn-dark\" @click=\"recognizeSpeakers\"\n                :disabled=\"recognizeProcessing\"\n                v-text=\"recognizeProcessing ? 'Recognizing Voices.....' : 'Recognize Voices'\"></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'trainVoice',\n  props: [ 'audioname', 'audiofullpath', 'users', 'meetingid' ],\n  data () {\n    return {\n      baseurl: null,\n      crop: false,\n      startTime: null,\n      endTime: null,\n      processing: false,\n      processingText: '',\n      recognizeProcessing: false,\n      audioPath: '',\n      form: {\n        attendee_id: '',\n        audio_name: '',\n        voice_list: []\n      }\n    }\n  },\n  mounted () {\n    this.baseurl = this.$parent.$attrs.baseurl;\n  },\n  methods: {\n    submit () {\n      this.processing = true\n      if (this.form.voice_list.length < 1) {\n        this.$snotify.error('You must crop at least once voice sample.!!', 'Error!!');\n\n        return '';\n      }\n      this.form.audio_name = this.audioname\n      this.processingText = 'Registering voice samples.....'\n      this.$http.post(this.baseurl + '/attendee-voice', this.form)\n        .then((result) => {\n          console.log(result)\n          this.processingText = 'Training the voice samples for the user.....'\n          this.$http.post(this.baseurl + '/train-attendee/' + this.form.attendee_id)\n            .then((result) => {\n              this.processing = false\n              this.reset();\n              this.$snotify.success('Voice samples registered and trained successfully!!', 'Success!!');\n\n            })\n            .catch(error => {\n              this.processing = false\n              this.$snotify.error('Something went wrong!!', 'Error');\n            })\n        })\n        .catch(error => {\n          this.processing = false\n          this.$snotify.error('Something went wrong!!', 'Error');\n        })\n    },\n    recognizeSpeakers () {\n      this.recognizeProcessing = true\n      this.$http.post(this.baseurl + '/recognize-speaker/' + this.meetingid)\n        .then((result) => {\n          this.recognizeProcessing = false;\n          this.$emit('voiceRecognized', result.data.data.recognized_speakers);\n\n          this.$snotify.success('Voices recognized successfully!!', 'Success!!');\n        })\n        .catch(error => {\n          this.recognizeProcessing = false\n          this.$snotify.error('Something went wrong!!', 'Error!!');\n        })\n    },\n    cropTime (event) {\n      let aud = document.getElementById('audio-player')\n      let currentTime = aud.currentTime\n      if (!this.crop) {\n        this.startTime = currentTime\n      } else {\n        this.endTime = currentTime\n        if (this.endTime - this.startTime < 1) {\n          this.$snotify.error('The time frame should be at least 1 second.!!', 'Error');\n\n          return ;\n        }\n        this.form.voice_list.push({\n          start: this.startTime,\n          end: this.endTime\n        })\n        this.startTime = null\n        this.endTime = null\n      }\n      this.crop = !this.crop\n    },\n    reset(){\n      this.form.attendee_id='';\n      this.form.voice_list = [];\n    },\n    removeVoice (key, voice) {\n      if (!confirm('Are you sure you want to delete?')) {\n        return\n      }\n      this.$delete(this.form.voice_list, key)\n\n      //this.checks = this.values.related_checks;\n    }\n  }\n}\n</script>"],"sourceRoot":"src/components"}]}